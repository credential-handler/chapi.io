<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">

<title>CHAPI is the Credential Handler API | an open-source solution for communicating Verifiable Credentials on the Web</title>
<meta property="og:title" content="CHAPI is the Credential Handler API" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="an open-source solution for communicating Verifiable Credentials on the Web" />
<meta property="og:description" content="an open-source solution for communicating Verifiable Credentials on the Web" />
<link rel="canonical" href="https://chapi.io/" />
<meta property="og:url" content="https://chapi.io/" />
<meta property="og:site_name" content="CHAPI is the Credential Handler API" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="CHAPI is the Credential Handler API" />
<script type="application/ld+json">{"@context":"https://schema.org","@type":"WebSite","description":"an open-source solution for communicating Verifiable Credentials on the Web","headline":"CHAPI is the Credential Handler API","name":"CHAPI is the Credential Handler API","url":"https://chapi.io/"}</script>

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="preload" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700&display=swap" as="style" type="text/css" crossorigin>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/fomantic-ui@2.9.2/dist/semantic.min.css">
    <link rel="stylesheet" href="/assets/css/style.css">
  </head>
  <body>
    <a id="skip-to-content" href="#content">Skip to the content.</a>

    <!-- Sidebar Menu -->
    <div class="ui vertical inverted right sidebar menu">
      <a class="item" href="/developers/issuers">VC Issuers</a>
      <a class="item" href="/developers/wallets">Digital Wallets</a>
      <a class="item" href="/developers/verifiers">VC Verifiers</a>
      <span class="item">
        <a class="ui basic inverted button" href="https://playground.chapi.io/">Try the Playground!</a>
      </span>
    </div>

    <div class="pusher">
    <header class="ui top inverted fixed menu" role="banner">
      <a class="ui header item" href=https://chapi.io/>
        chapi.io
        <span class="desktop only">&nbsp; | Credential Handler API</span>
      </a>
      <span class="item">
        <a class="ui basic inverted button" href="https://playground.chapi.io/">Try the Playground!</a>
      </span>
      <div class="right menu">
        <a class="toc icon item"><i class="sidebar icon"></i></a>
        <a class="item" href="/developers/issuers">VC Issuers</a>
        <a class="item" href="/developers/wallets">Digital Wallets</a>
        <a class="item" href="/developers/verifiers">VC Verifiers</a>
      </div>
    </header>
    

    <main id="content" class="main-content" role="main">
      <h1>CHAPI Playground Integration Guide</h1>
<p>Have you already integrated CHAPI into your project and now you’re interested in making your Issuer, Wallet, or Verifier available for experimentation? This Integration Guide/FAQ for the CHAPI Playground will help you accomplish this!</p>
<h2>Issuers</h2>
<h3>Introduction</h3>
<p>You can integrate your Issuer into our tooling with the <a href="https://playground.chapi.io/issuer">CHAPI Playground Issuer</a>.</p>
<p>If you provide a <a href="https://w3c-ccg.github.io/vc-api/#issue-credential">VC-API Issue Credential Endpoint</a>, we can add your issuer to the list of options accessible from the &quot;Gear&quot; icon on the site.  Your endpoint should end in <code>/credentials/issue</code>.</p>
<p>We've put together a <a href="https://github.com/credential-handler/chapi-playground-test-suite">simple test utility</a> that you can run locally against your endpoint (the test runs locally; the endpoint can be running anywhere).  Once your issuer endpoint can pass the test conditions, we'll be ready to add it to the list of options in the CHAPI Playground.</p>
<p>Once integrated into the Playground, your issuer will be able to work with any CHAPI-enabled wallet, including the Veres Wallet. (Note that you can also add CHAPI support directly to your issuer so that it can communicate directly with digital wallets).</p>
<h3>Adding contexts to issuers so that they can support the example credentials hosted on the CHAPI Playground.</h3>
<p>Many VC issuers keep a list of supported JSON-LD contexts.  To ensure interoperability, make sure your issuer supports the <a href="https://docs.google.com/document/d/1L3GnHtvrH51MJ7W2ZAL-PIfzR2dxLyFoDrUAHZ1KBU4/edit">following contexts</a> used in the example credentials hosted on the CHAPI Playground.</p>
<p>NOTE: Example credentials can be added or updated in
<a href="https://github.com/credential-handler/vc-examples">@credential-handler/vc-examples</a>.</p>
<h3>How should my issuer endpoint handle authentication?</h3>
<p>Issuer endpoint authentication is up-to-you.  Many issuers choose to start with open (unauthenticated) VC-API endpoints, but the CHAPI Playground backend also supports zCap and Oauth2 authentication.  You can test with the endpoint open and then add backend auth as a second step, if you would like to have it.</p>
<h3>Do I need to enable CORS on my issuer endpoint?</h3>
<p>Issuer backends do not need CORS because the CHAPI Playground web app makes a backend call to your VC-API endpoint.</p>
<h2>Wallets</h2>
<h3>Introduction</h3>
<p>Wallets can integrate with the CHAPI Playground using two different methods:</p>
<ol>
<li><strong>Basic CHAPI store() workflow:</strong> this workflow uses CHAPI to directly communicate a Verifiable Credential.  The <a href="https://playground.chapi.io">CHAPI Playground</a> site uses VCAPI on the backend to connect to various issuer sites.  This is a simplified workflow that can get developers up-and-running without the need to implement a credential pickup using VC-API Exchanges.</li>
<li><strong>VC-API Exchanges workflow:</strong> in this workflow, the Playground site uses CHAPI to communicate the URL of a VC-API <code>/exchanges</code> endpoint where a Verifiable Credential can be picked up.  The use of CHAPI here preserves the individual's choice of wallet and avoids the need to make assumptions about credential types, wallet apps, etc.  The wallet then hits the specified <code>/exchanges</code> endpoint and receives a Verifiable Presentation containing the Credential.  DID Authentication and credential pickup are performed in the same step.  This is especially useful for native mobile apps.</li>
</ol>
<h3>Integrating with the basic CHAPI store() workflow</h3>
<p>Any CHAPI-enabled wallet can work with the CHAPI Playground.  There is no explicit setting or integration required with the Playground site; all that’s required is that the user register the wallet with their browser (web wallets) or as a Share Target (native mobile apps).  See the <a href="https://chapi.io/developers/wallets">developer notes</a> for instructions and examples on how to implement CHAPI in a web wallet.</p>
<p>When the CHAPI Playground issues a credential, it generates a CHAPI <code>store()</code> event.  This is also documented in the developer notes linked above.</p>
<h3>Performing DID Authentication (“DID Auth”) with the CHAPI Playground in the store() workflow?</h3>
<p>The CHAPI Playground follows the DID Auth patterns described in the <a href="https://w3c-ccg.github.io/vp-request-spec/#example-example-get-request">Verifiable Presentation Request (VPR) spec</a>.</p>
<p>First, the Playground will send a Verifiable Presentation Request as a &quot;web&quot; credential object using <code>navigator.credentials.get()</code>.  Second, your wallet will respond with a Verifiable Presentation,  also as a &quot;web&quot; credential object.  Examples of both the VPR and VP are included in the <a href="https://chapi.io/developers/wallets">wallet developer notes</a>.</p>
<p>The Playground receives the DID Auth, it extracts the value of <code>holder</code> and inserts it into the credential being issued.  Then, the credential is issued using the basic CHAPI <code>store</code> workflow.</p>
<h3>Integrating with the VC-API Exchanges workflow</h3>
<p>The general <code>/exchanges</code> pattern is illustrated in the <a href="https://w3c-ccg.github.io/vp-request-spec/#example-example-interact-request">Verifiable Presentation Request (VPR) spec</a>, which shows how an issuer can ask for DID Authentication and then point the wallet at <code>/exchanges</code> endpoint to perform the Auth-Pickup workflow.</p>
<p>In this example, the <code>interact</code> field describes the type and URL of the <code>/exchanges</code> endpoint.  The <code>type</code> is an <code>UnmediatedPresentationService2021</code>, which is outlined in the <a href="https://w3c-ccg.github.io/vc-api/#exchange-examples">VC-API spec</a>.</p>
<p>The CHAPI Playground implementation follows the general pattern, via the following spcific steps (with example data):</p>
<p><strong>Step 1</strong>: CHAPI Playground sends a DID Auth Request (VPR) over CHAPI to the wallet.  This includes an <code>interact</code> field that specifies an <code>/exchanges</code> endpoint on the CHAPI Playground.</p>
<pre><code class="language-json">{
  &quot;query&quot;: {
    &quot;type&quot;: &quot;DIDAuthentication&quot;
  },
  &quot;interact&quot;: {
    &quot;service&quot;: [
      {
        &quot;type&quot;: &quot;VerifiableCredentialApiExchangeService&quot;,
        &quot;serviceEndpoint&quot;: &quot;https://playground.chapi.io/exchanges/eyJjcmVkZW50aWFsIjoiaHR0cHM6Ly9wbGF5Z3JvdW5kLmNoYXBpLmlvL2V4YW1wbGVzL2pmZjIvamZmMi5qc29uIiwiaXNzdWVyIjoiZGIvdmMifQ/esOGVHG8d44Q&quot;
      },
      {
        &quot;type&quot;: &quot;CredentialHandlerService&quot;
      }
    ]
  },
  &quot;challenge&quot;: &quot;g2Wvqg7-cQGWYCCH55rUl&quot;,
  &quot;domain&quot;: &quot;playground.chapi.io&quot;
}
</code></pre>
<p><strong>Step 2</strong>: The Wallet POSTs a VP containing the DID Auth to the <code>/exchanges</code> endpoint.</p>
<pre><code class="language-json">{
  &quot;verifiablePresentation&quot; :{
    &quot;@context&quot;: [
      &quot;https://www.w3.org/2018/credentials/v1&quot;
    ],
    &quot;type&quot;: [
      &quot;VerifiablePresentation&quot;
    ],
    &quot;holder&quot;: &quot;did:example:z6MkjsQSCqdN4CGE6R9tKhETAEoPYdcpO5v4tK2USAhWptpr&quot;,
    &quot;proof&quot;: {
      &quot;type&quot;: &quot;Ed25519Signature2020&quot;,
      &quot;created&quot;: &quot;2022-10-17T18:12:55Z&quot;,
      &quot;verificationMethod&quot;: &quot;did:example:z6MkjsQSCqdN4CGE6R9tKhETAEoPYdcpO5v4tK2USAhWptpr#z6MkjsQSCqdN4CGE6R9tKhETAEoPYdcpO5v4tK2USAhWptpr&quot;,
      &quot;proofPurpose&quot;: &quot;authentication&quot;,
      &quot;challenge&quot;: &quot;TTkKgear2sBt4TYxr_zrL&quot;,
      &quot;domain&quot;: &quot;playground.chapi.io&quot;,
      &quot;proofValue&quot;: &quot;eyJhbGciOiJFZERTQSIsImI2NCI6ZmFsc2UsImNyaXQiOlsiYjY0Il19..gaG1RaxRy-xLkjVN-7ulh0dbUU1EX&quot;
    }
  }
}
</code></pre>
<p><strong>Step 3</strong>: The CHAPI Playground <code>/exchanges</code> endpoint responds with a VP containing the specified credential</p>
<pre><code class="language-json">{
  &quot;verifiablePresentation&quot;: {
    &quot;@context&quot;: [
      &quot;https://www.w3.org/2018/credentials/v1&quot;
    ],
    &quot;type&quot;: [
      &quot;VerifiablePresentation&quot;
    ],
    &quot;verifiableCredential&quot;: [
      {
        ...
        // the issued credential with the DID from the DID Auth inserted into credentials subject
      }
    ]
  }
}
</code></pre>
<h2>Verifiers</h2>
<p>Integrating Verifiers into the CHAPI Playground is next on our agenda, stay tuned for more information on that process as it becomes available.</p>


      <footer class="site-footer">
        
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>
    </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fomantic-ui@2.9.2/dist/semantic.min.js"></script>
    <script>
      // create sidebar and attach to menu open
      $('.ui.sidebar')
        .sidebar('attach events', '.toc.item');
    </script>

  </body>
</html>
